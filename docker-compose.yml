version: "3.2"
services:
  motor-sim:
    image: sim-pmac
    stop_signal: "SIGKILL"
  motor-ioc:
    image: pmac-ioc
    stdin_open: true
    depends_on:
      - motor-sim
    stop_signal: "SIGKILL"
    env_file:
      - epics.env
  areadetector:
    image: ad-ioc
    stdin_open: true
    stop_signal: "SIGKILL"
    volumes:
      - type: bind
        source: ./data
        target: /out
    env_file:
      - epics.env
  pulse-sim:
    image: sim-pulse
    stop_signal: "SIGKILL"
    env_file:
      - epics.env
  gateway:
    image: ${DOCKER_TAG_BASE}epics-gateway-run:${DOCKER_TAG_VERSION}
    ports:
      - "50640:50640"
      - "5064:50640/udp"
    env_file:
      - epics.env
